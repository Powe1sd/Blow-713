<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Juego de Programación</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.css"
    />
    <style>
      body {
        font-family: "Arial", sans-serif;
        background-color: #f5f5f5;
        margin: 0;
        padding: 0;
      }
      .container {
        text-align: center;
        margin-top: 50px;
      }
      h1 {
        color: #333;
        margin-bottom: 30px;
      }
      #question {
        font-size: 24px;
        margin-bottom: 20px;
      }
      .options {
        display: flex;
        justify-content: center;
        margin-bottom: 20px;
      }
      .option {
        margin: 0 10px;
        padding: 10px 20px;
        font-size: 16px;
        background-color: #4caf50;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }
      .option:hover {
        background-color: #45a049;
      }
      #downloadLink {
        padding: 10px 20px;
        font-size: 16px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
        text-decoration: none;
        display: none;
      }
      #downloadLink:hover {
        background-color: #0056b3;
      }

      .inicio {
        position: fixed;
        font-size: 20px;
        color: red;
        background-color: black;
        bottom: 20px;
        left: 20px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <a href="../sofware.html">
      <button class="inicio">INICIO</button>
    </a>
    <div class="container">
      <h1>Juego de Preguntas</h1>
      <div id="question"></div>
      <div class="options" id="options"></div>
    </div>
    <a id="downloadLink" download="questions_and_answers.txt" href="#"
      >Descargar Preguntas y Respuestas</a
    >

    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>
    <script>
      const questions = [
        {
          question: "¿Qué significa HTML?",
          options: [
            "Lenguaje de Marcado de Hipertexto",
            "Aprendizaje Automático de Alta Tecnología",
            "Lenguaje de Marcado de Hiperenlaces y Texto",
          ],
          answer: "Lenguaje de Marcado de Hipertexto",
        },
        {
          question:
            "¿Qué lenguaje de programación se utiliza para hacer páginas web interactivas?",
          options: ["JavaScript", "Python", "C++", "HTML"],
          answer: "JavaScript",
        },
        {
          question:
            "¿Cuál es la palabra clave para declarar una variable en JavaScript?",
          options: ["var", "let", "const", "variable"],
          answer: "var",
        },
        {
          question:
            "¿Cómo se llama la función que se ejecuta cuando se carga una página web en JavaScript?",
          options: ["onLoad", "onStart", "onReady", "initialize"],
          answer: "onLoad",
        },
        {
          question:
            "¿Qué método se utiliza para añadir un elemento al final de un array en JavaScript?",
          options: [".push()", ".pop()", ".add()", ".insert()"],
          answer: ".push()",
        },
        {
          question: "¿Cuál es el operador de igualdad estricta en JavaScript?",
          options: ["===", "==", "=", "!="],
          answer: "===",
        },
        {
          question:
            "¿Cómo se llama la función que se utiliza para imprimir mensajes en la consola en JavaScript?",
          options: ["console.log()", "print()", "log()", "println()"],
          answer: "console.log()",
        },
        // Agrega más preguntas aquí...
        {
          question: "¿Qué significa CSS?",
          options: [
            "Hojas de Estilo en Cascada",
            "Hojas de Estilo Geniales",
            "Hojas de Estilo Creativas",
            "Hojas de Estilo Bonitas",
          ],
          answer: "Hojas de Estilo en Cascada",
        },
        {
          question: "¿Qué significa API en el contexto de programación?",
          options: [
            "Interfaz de Programación de Aplicaciones",
            "Interfaz de Programación Avanzada",
            "Interfaz de Programación Automatizada",
            "Integración de Protocolo de Aplicación",
          ],
          answer: "Interfaz de Programación de Aplicaciones",
        },
        {
          question:
            "¿Cuál de los siguientes es un lenguaje de programación orientado a objetos?",
          options: ["Java", "HTML", "CSS", "SQL"],
          answer: "Java",
        },
      ];

      // Función para seleccionar aleatoriamente las preguntas
      function shuffleQuestions() {
        for (let i = questions.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [questions[i], questions[j]] = [questions[j], questions[i]];
        }
      }

      let currentQuestionIndex = 0;
      let correctAnswers = 0;
      let incorrectAnswers = 0;

      function displayQuestion() {
        const questionElement = document.getElementById("question");
        const optionsElement = document.getElementById("options");
        const currentQuestion = questions[currentQuestionIndex];

        questionElement.textContent = currentQuestion.question;
        optionsElement.innerHTML = "";

        currentQuestion.options.forEach((option, index) => {
          const optionButton = document.createElement("button");
          optionButton.textContent = option;
          optionButton.className = "option";
          optionButton.onclick = () => checkAnswer(option);
          optionsElement.appendChild(optionButton);
        });
      }

      function checkAnswer(selectedAnswer) {
        const currentQuestion = questions[currentQuestionIndex];
        if (selectedAnswer === currentQuestion.answer) {
          correctAnswers++;
        } else {
          incorrectAnswers++;
        }
        currentQuestionIndex++;
        if (currentQuestionIndex < questions.length) {
          displayQuestion();
        } else {
          endGame();
        }
      }

      function endGame() {
        const downloadLink = document.getElementById("downloadLink");
        downloadLink.style.display = "block";
        const container = document.querySelector(".container");
        const totalQuestions = questions.length;
        const correctPercentage = (correctAnswers / totalQuestions) * 100;

        if (correctPercentage > 60) {
          swal("¡Felicidades!", "¡Ganaste!", "success");
        } else {
          swal("¡Lo siento!", "¡Perdiste!", "error");
        }

        container.innerHTML += `<h2>Respuestas correctas: ${correctAnswers}</h2>`;
        container.innerHTML += `<h2>Respuestas incorrectas: ${incorrectAnswers}</h2>`;
        container.innerHTML += `<h2>Porcentaje de respuestas correctas: ${correctPercentage.toFixed(
          2
        )}%</h2>`;
      }

      function downloadQuestionsAndAnswers() {
        let qaContent = "Pregunta\tRespuesta\n";
        questions.forEach((question, index) => {
          qaContent += `${question.question}\t${question.answer}\n`;
        });
        const blob = new Blob([qaContent], {
          type: "text/plain;charset=utf-8",
        });
        const url = window.URL.createObjectURL(blob);
        const downloadLink = document.getElementById("downloadLink");
        downloadLink.href = url;
      }

      window.onload = () => {
        shuffleQuestions(); // Baraja las preguntas al cargar la página
        displayQuestion(); // Muestra la primera pregunta
      };
      document
        .getElementById("downloadLink")
        .addEventListener("click", downloadQuestionsAndAnswers);
    </script>
  </body>
</html>
